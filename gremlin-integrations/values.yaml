# Default values for gremlin-integrations.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 1

image:
  repository: gremlin/gremlin-integrations
  pullPolicy: Always
  # Overrides the image tag whose default is the chart appVersion.
  tag: latest

imagePullSecrets: [ ]
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: { }
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: "gremlin-integrations"

podAnnotations: { }

podSecurityContext: { }
# fsGroup: 2000

securityContext: { }

nodeSelector: { }

tolerations: [ ]

affinity: { }

ssl:
  # ssl.certFile -
  # Add a certificate file to Gremlin's set of certificate authorities. This argument expects a file containing the
  # certificate(s) you wish to add. When set, this chart creates secret (`ssl-cert-file`) with the contents and passes
  # it to both agents. This value is ignored when blank or absent.
  certFile:
  # ssl.certDir -
  # sets the SSL_CERT_DIR environment variable on the both agents. Unlike ssl.certFile, this value accepts only a
  # path to an existing directory on the Kubernetes nodes. This value is ignored when blank or absent.
  certDir:

gremlin:
  # gremlin.resources -
  # Set resource requests and limits
  # See: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers
  #
  # NOTE: This resource specification affects the Gremlin agent which is used for host attacks. This resource
  # Attacks targeting other Kubernetes pods will use the resource specification of their target.
  resources: {}
  secret:
    # Gremlin supports both `certificate` and `secret` types
    # To manage secrets with helm, set `managed=true` and fill in either the certificate auth or secret auth sections
    type: certificate
    managed: false
    # team identifier (e.g. 11111111-1111-1111-1111-111111111111)
    teamID: ""

    ## Certificate auth requires: `certificate` and `key`
    # team certificate (e.g. -----BEGIN CERTIFICATE-----...-----END CERTIFICATE-----)
    certificate: ""
    # team private key (e.g. -----BEGIN EC PRIVATE KEY-----...-----END EC PRIVATE KEY-----)
    key: ""

    ## Secret auth requires: `teamSecret`
    # team secret (e.g. 00000000-0000-0000-0000-000000000000)
    teamSecret: ""
  allowList: ""
  proxy:
    # gremlin.proxy.url -
    # Specifies the http proxy that the Gremlin Agent and Gremlin Kubernetes agent should use to communicate with
    # api.gremlin.com. This value is ignored when blank or absent.
    url:

  # gremlin.tls -
  # A collection of TLS configurations specific to the Gremlin Integrations Deployment.
  tls:
    # gremlin.tls.identity -
    # Configuration items for configuring the TLS identity of the Gremlin HTTP client for mTLS.
    # Identity values are made up of
    #   - `cert` portion, containing the leaf certificate for the client (plus any intermediate certificates)
    #   - `key` portion, containing the private key for the client
    #
    # These values can be supplied in three different strategies:
    #   - `remoteSecret`: a collection of ARN values for AWS Secrets Manager
    #   - `createSecret`: content supplied directly to this chart for which a new Kubernetes secret will be created
    #   - `existingSecret`: a reference to an existing Kubernetes secret (e.g. created from cert-manager)
    #
    # Only one of the above strategies should be fully configured. A strategy is not used until all of its fields are configured.
    identity:
      # gremlin.tls.identity.enabled -
      # Decides whether the Gremlin Integrations Deployment should be configured for a TLS identity
      enabled: false
      # gremlin.tls.identity.remoteSecret -
      # The remoteSecret strategy accepts `cert` and `key` strings in the form of ARN values for AWS Secrets Manager
      remoteSecret:
        # gremlin.tls.identity.remoteSecret.cert -
        # The ARN for the identity certificate
        cert: ""
        # gremlin.tls.identity.remoteSecret.key -
        # The ARN for the identity private key
        key: ""
      # gremlin.tls.identity.createSecret -
      # The createSecret strategy accepts PEM encoded certificate and private key content to create a new Kubernetes secret
      createSecret:
        # gremlin.tls.identity.createSecret.name -
        # The name of the new secret
        name: "gremlin-tls-identity"
        # gremlin.tls.identity.createSecret.cert -
        # The PEM-encoded certificate (expected to be a multi-line string)
        cert: ""
        # gremlin.tls.identity.createSecret.key -
        # The PEM-encoded private key (expected to be a multi-line string)
        key: ""
      # gremlin.tls.identity.existingSecret -
      # The existingSecret strategy accepts a reference to an existing Kubernetes secret
      existingSecret:
        # gremlin.tls.identity.existingSecret.name -
        # The name of the existing secret
        name: ""
        # gremlin.tls.identity.existingSecret.cert -
        # The name of the key inside the existing secret that maps to the certificate value
        cert: "tls.crt"
        # gremlin.tls.identity.existingSecret.key -
        # The name of the key inside the existing secret that maps to the private key value
        key: "tls.key"

  # gremlin.extraEnv
  # Specify any arbitrary environment variables to pass to the Gremlin Integrations Agent deployment
  extraEnv: []
